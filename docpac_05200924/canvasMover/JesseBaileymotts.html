<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SODA!!!! Mover</title>
</head>

<body>
    <canvas id="canvas" width="800" height="600"></canvas>
</body>
<script>
    const c = document.getElementById("canvas");
    const ctx = c.getContext("2d");
    const player = {
    x: 0,
    y: 0,
    w: 100,
    h: 193,
    img: new Image(),
    }   

    player.img.src = 'img/SODA!!!!.jpg'

    window.addEventListener('gamepadconnected', (event) => {
        const update = () => {
            const gamepad = navigator.getGamepads()[0];
            const xAxis = Math.round(gamepad.axes[0] * 100)/100;
            const yAxis = Math.round(gamepad.axes[1] * 100)/100;

            player.x = Math.floor(player.x + (xAxis * 2));
            player.y = Math.floor(player.y + (yAxis * 2));

            if ((player.x + player.w) > 800 ) {
                player.x = 800 - player.w;
            } else if (player.x< 0) {
                player.x = 0;
            }

            if ((player.y + player.h) > 600 ) {
                player.y = 600 - player.h;
            } else if (player.y < 0) {
                player.y = 0;
            }

            ctx.clearRect(0, 0, c.width, c.height);
            ctx.drawImage(player.img, player.x, player.y);
            ctx.fillStyle = 'lightgrey';
            ctx.fillRect(0, 0, 115, 25)
            ctx.fillStyle = 'black';
            ctx.fillText('Play Type: Gamepad', 10, 10);
            ctx.fillText('(' + player.x + ', ' + player.y + ')', 10, 20);
            
            requestAnimationFrame(update);
        };
        update();

    });
</script>

</html>